 
<style>
    body {
        background: #F0F0F0 !important;
        color: #313131 !important;
    }

    .ace-monokai {
        min-height: 200px;
    }

    .progress-bar {
    }
</style>
<br /><br /><br /><br />
<h3>@ViewData["Message"]</h3>

<link href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" type="text/css" rel="stylesheet" />
<script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.8/ace.js"></script>
<script>
    var baseUrl = window.location.origin+"/";

    $(document).ready(function () {
        loadServiceLine();
        loadEnvironments();

        $('.changeTrigger').on('change', function () {
            serviceLine = $('#selectServiceLine').val();
            environment = $('#selectEnvironment').val();

            if (serviceLine && environment) {
                console.log(serviceLine, environment);
            }
             
        })
    })

    function loadServiceLine() {
        url = baseUrl + "home/getServiceLine";
        $.post(url, function (data) {
            console.log(data);
            data = $.parseJSON(data);
            html = '<option selected disabled>Select Serviceline</option>';
            $(data).each(function (i, v) {
                html += '<option value="'+v.id+'">' + v.serviceLine_name + '</option>';
            })
            $('#selectServiceLine').html(html); 
        })
    }

    function loadEnvironments() {
        url = baseUrl + "home/getEnvironments";
        $.post(url, function (data) {
            console.log(data);
            data = $.parseJSON(data);
            
            html = '';
            html = '<option selected disabled>Select Environment</option>';
            $(data).each(function (i, v) {
                html += '<option value="' + v.id + '">' + v.environment + '</option>';
            })
            $('#selectEnvironment').html(html);
        })
    }

    function getServerList(svcLineId,envId) {
        url = baseUrl + "home/getServers";
        $.post(url, { svcLineID: svcLineId, envId: envId }, function (data) {
            data = $.parseJSON(data);
             
            html = '';
            html = '<option selected disabled>Select Environment</option>';
            $(data).each(function (i, v) {
                html += '<option value="' + v.id + '">' + v.environment1 + '</option>';
            })
            $('#selectEnvironment').html(html);
        })
    }

    

    

</script>
<input type="hidden" id="xml_filename" value="" />
<div id="serverList" style="display:none">
    
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="col-lg-4" style="padding: 0;">
            <label class="">Select Service Line</label>
            <select class="form-control changeTrigger" id="selectServiceLine" >
                <option>None</option>
            </select>
        </div>

        <div class="col-lg-4" style="padding: 0;">
            <label class="">Select Environment</label>
            <select class="form-control  changeTrigger" id="selectEnvironment">
                <option>None</option>
            </select>
        </div>

        <div class="col-lg-4" style="padding: 0; display:none">
            <label class="">Select Application</label>
            <select class="form-control" id="selectApplication">
                <option>None</option>
            </select>
        </div>
       
    </div>
    <br /><hr />
    <div class="col-lg-6" style="display:none" id="xmlHolder">  </div>
    <div class="col-lg-6">

        <div class="logHolder">
            <h3 style=" display:none; margin 0px; margin-top 4px;" id="logTxt">Installed KBs</h3>
            <textarea style="width: 100%; background: #000; color: #fff; display:none; height:200px" rows="6" id="logArea"></textarea>
        </div>

    </div>
    <div class="col-lg-12">

        <div id="fqdn_chkbox_holder"> </div>
        <hr />
        <div> 

            <button class="btn btn-success btn-flat" onclick="getXML()"> <i class="glyphicon glyphicon-flash"></i> Generate XML</button>
            <button class="btn btn-info btn-flat" onclick="patch()"> <i class="glyphicon glyphicon-fire"></i> Patch</button>
        </div>
        <hr />

    </div>
    <br /><br /><br /><br /><br /><br /><br /><br />
